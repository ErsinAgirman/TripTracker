<!DOCTYPE html>
<html>

<head>
    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>Mico</title>


    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="~/mico-html/css/bootstrap.css" />

    <!-- fonts style -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">

    <!--owl slider stylesheet -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />

    <!-- font awesome style -->
    <link href="~/mico-html/css/font-awesome.min.css" rel="stylesheet" />
    <!-- nice select -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css" integrity="sha256-mLBIhmBvigTFWPSCtvdu6a76T+3Xyt+K571hupeFLg4=" crossorigin="anonymous" />
    <!-- datepicker -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker.css">
    <!-- Custom styles for this template -->
    <link href="~/mico-html/css/style.css" rel="stylesheet" />
    <!-- responsive style -->
    <link href="~/mico-html/css/responsive.css" rel="stylesheet" />

</head>

<body>


    @{
        var cities = new List<string>
    {
    "Adana", "Adıyaman", "Afyonkarahisar", "Ağrı", "Amasya", "Ankara", "Antalya", "Artvin",
    "Aydın", "Balıkesir", "Bilecik", "Bingöl", "Bitlis", "Bolu", "Burdur", "Bursa",
    "Çanakkale", "Çankırı", "Çorum", "Denizli", "Diyarbakır", "Edirne", "Elazığ",
    "Erzincan", "Erzurum", "Eskişehir", "Gaziantep", "Giresun", "Gümüşhane",
    "Hakkari", "Hatay", "Isparta", "Mersin", "İstanbul", "İzmir", "Kars", "Kastamonu",
    "Kayseri", "Kırklareli", "Kırşehir", "Kocaeli", "Konya", "Kütahya", "Malatya",
    "Manisa", "Kahramanmaraş", "Mardin", "Muğla", "Muş", "Nevşehir", "Niğde",
    "Ordu", "Rize", "Sakarya", "Samsun", "Siirt", "Sinop", "Sivas", "Tekirdağ",
    "Tokat", "Trabzon", "Tunceli", "Şanlıurfa", "Uşak", "Van", "Yozgat",
    "Zonguldak", "Aksaray", "Bayburt", "Karaman", "Kırıkkale", "Batman",
    "Şırnak", "Bartın", "Ardahan", "Iğdır", "Yalova", "Karabük", "Kilis",
    "Osmaniye", "Düzce"
    };
    }

    <!-- book section -->

    <section class="book_section layout_padding">
        <div class="container">
            <div class="row">
                <div class="col">
                    <form>
                        <h4>
                            SEYAHAT <span> <br> PLANLAMA</span>
                        </h4>
                        <div class="form-row ">
                            <div class="form-group col-lg-4">
                                <label for="inputStaffId">Staff ID </label>
                                <input type="number" class="form-control" id="inputStaffId" placeholder="Staff Id Girin">
                            </div>
                            <div class="form-group col-lg-4">
                                <label for="inputAdminId">Yönetici Seçin</label>
                                <select class="form-control" id="inputAdminName">
                                    <option value="">Bir yönetici seçin</option>
                                </select>
                                <input type="hidden" id="inputAdminId" name="AdminId">
                            </div>

                            <div class="form-group col-lg-4">
                                <label for="inputStay">Kalacak Yer</label>
                                <input type="text" class="form-control" id="inputStay" placeholder="Kalacak Yer Girin">
                            </div>
                        </div>
                        <div class="form-row ">
                            <div class="form-group col-lg-4">
                                <label for="inputDescription">Seyahat Açıklaması</label>
                                <input type="text" class="form-control" id="inputDescription" placeholder="Seyahat Açıklaması Girin">
                            </div>
                           @*  <div class="form-group col-lg-4">
                                <label for="inputStartDate">Başlangıç Tarihi </label>
                                <div class="input-group date" id="inputStartDate" data-date-format="mm-dd-yyyy">
                                    <input type="date" class="form-control">
                                    <span class="input-group-addon date_icon">
                                        <i class="" aria-hidden="true"></i>
                                    </span>
                                </div>
                            </div> //HATALI KODLAR
                            <div class="form-group col-lg-4">
                                <label for="inputEndDate">Bitiş Tarihi </label>
                                <div class="input-group date" id="inputEndDate" data-date-format="mm-dd-yyyy">
                                    <input type="date" class="form-control">
                                    <span class="input-group-addon date_icon">
                                        <i class="" aria-hidden="true"></i>
                                    </span>
                                </div>
                            </div> *@
                            <div class="form-group col-lg-4">
                                <label for="inputStartDate">Başlangıç Tarihi </label>
                                <input type="date" class="form-control" id="inputStartDate">
                            </div>
                            <div class="form-group col-lg-4">
                                <label for="inputEndDate">Bitiş Tarihi </label>
                                <input type="date" class="form-control" id="inputEndDate">
                            </div>


                            <div class="form-group col-lg-4">
                                <label for="inputVehicle">Seyahat Yöntemi</label>
                                <select name="" class="form-control wide" id="inputVehicle">
                                    <option value="Otel ">Şahsi Araç </option>
                                    <option value="Otobus ">Otobüs </option>
                                    <option value="Ucak ">Uçak </option>
                                    <option value="Gemi ">Gemi </option>
                                    <option value="Diger ">Diğer </option>
                                </select>
                            </div>

                            <div class="form-group col-lg-4">
                                <label for="inputCityName">Şehir Seçin veya Yazın</label>
                                <input list="cityList" name="city" class="form-control wide" id="inputCityName" placeholder="Şehir seçin veya yazın">
                                <datalist id="cityList">
                                    @foreach (var city in cities)
                                    {
                                        <option value="@city">@city</option>
                                    }
                                </datalist>
                            </div>

                        </div>

                        <div class="btn-box">
                            <button type="submit" id="submitTravelButton" class="btn ">Seyahati Kaydet</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- end book section -->

    <section class="about_section">
        <div class="container  ">
            <div class="row">
                <div class="col-md-6 ">
                    <div class="img-box">
                        <img src="~/mico-html/images/about-img.jpg" alt="">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="detail-box">
                        <div class="heading_container">
                            <h2>
                                About <span>Hospital</span>
                            </h2>
                        </div>
                        <p>
                            has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors
                        </p>
                        <a href="">
                            Read More
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>



    <!-- footer section -->
    <!-- footer section -->
    <!-- jQery -->
    <script src="~/mico-html/js/jquery-3.4.1.min.js"></script>
    <!-- bootstrap js -->
    <script src="~/mico-html/js/bootstrap.js"></script>
    <!-- nice select -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js" integrity="sha256-Zr3vByTlMGQhvMfgkQ5BtWRSKBGa2QlspKYJnkjZTmo=" crossorigin="anonymous"></script>
    <!-- owl slider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- datepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
    <!-- custom js -->
    <script src="~/mico-html/js/custom.js"></script>



    <script>

        $(document).ready(function () {
            // Admin verilerini API'den çekme
            $.ajax({
                url: "https://localhost:7294/api/Admin",
                method: "GET",
                success: function (data) {
                    var dropdown = $("#inputAdminName");
                    dropdown.empty(); // Dropdown'u temizle
                    dropdown.append('<option value="">Bir yönetici seçin</option>'); // Varsayılan seçenek
                    $.each(data.data, function (index, admin) {
                        dropdown.append('<option value="' + admin.id + '">' + admin.name + ' ' + admin.surname + '</option>');
                    });
                },
                error: function (err) {
                    console.log("Error fetching admin data: " + err.statusText);
                }
            });

            // Kullanıcı bir admin seçtiğinde, seçilen admin ID'sini gizli input alanına yerleştirme
            $("#inputAdminName").change(function () {
                var selectedAdminId = $(this).val();
                $("#inputAdminId").val(selectedAdminId);
            });

            // Formu AJAX ile gönderme
            $("#submitTravelButton").click(function (event) {
                event.preventDefault();

                var travelData = {
                    City: $("#inputCityName").val(),
                    Description: $("#inputDescription").val(),
                    Stay: $("#inputStay").val(),
                    StartDate: $("#inputStartDate").val(),
                    EndDate: $("#inputEndDate").val(),
                    Vehicle: $("#inputVehicle").val(),
                    StaffId: $("#inputStaffId").val(),
                    //StatusId: $("#inputStatusId").val() || 3,
                    AdminId: $("#inputAdminId").val(),
                };

                console.log(travelData); // Verileri kontrol etmek için
                $.ajax({
                    url: "https://localhost:7294/api/Travel",
                    method: "POST",
                    contentType: "application/json",
                    data: JSON.stringify(travelData),
                    success: function (response) {
                        alert("Seyahat başarıyla kaydedildi!");
                        console.log(response);
                    },
                    error: function (err) {
                        console.log(err);
                        alert("Bir hata oluştu: " + err.statusText);
                    }
                });
            });
        });


    </script>


</body>

</html>